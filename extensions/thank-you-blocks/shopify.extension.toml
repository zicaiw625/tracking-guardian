api_version = "2025-07"
type = "ui_extension"
name = "Tracking Guardian Blocks"
handle = "tracking-guardian-blocks"

[[extensions]]
type = "checkout_ui_extension"
name = "Post-purchase Survey"
handle = "post-purchase-survey"

  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/Survey.tsx"
  target = "purchase.thank-you.block.render"

[[extensions]]
type = "customer_account_ui_extension"
name = "Order Status Survey"
handle = "order-status-survey"

  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/Survey.orderStatus.tsx"
  target = "customer-account.order-status.block.render"

[settings]
  [[settings.fields]]
  key = "survey_title"
  name = "Survey Title"
  description = "Title for the post-purchase survey"
  type = "single_line_text_field"
  
  [[settings.fields]]
  key = "survey_question"
  name = "Survey Question"
  description = "The question to ask customers"
  type = "single_line_text_field"
  
  # P1-4: Backend URL configuration for multi-environment support
  [[settings.fields]]
  key = "backend_url"
  name = "Backend URL"
  description = "URL for the Tracking Guardian backend. Leave empty to use default."
  type = "single_line_text_field"
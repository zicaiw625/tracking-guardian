api_version = "2025-07"

# =============================================================================
# Survey Block - Thank You Page
# =============================================================================
# P0-2: æŒ‰å®˜æ–¹è§„èŒƒï¼Œåªä½¿ç”¨ [[extensions]] ç»“æ„ï¼Œç§»é™¤é¡¶å±‚ type/name/handle
# âš ï¸ é‡è¦ï¼šuid å¿…é¡»ç”± Shopify CLI åœ¨é¦–æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨ç”Ÿæˆ
# å¦‚æœè¿™æ˜¯æ–°æ‰©å±•ï¼Œè¿è¡Œ `shopify app deploy` ä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶å¡«å…… uid
# å¦‚æœ uid ç¼ºå¤±æˆ–æ— æ•ˆï¼Œä¼šå¯¼è‡´æ‰©å±•åˆ›å»º/æ›´æ–°å¤±è´¥
#
# P0-4: UI Extensions Target è¯´æ˜
# - target = "purchase.thank-you.block.render": Thank you é¡µé¢æ‰©å±•ç‚¹
#   - åœ¨è®¢å•å®Œæˆåçš„æ„Ÿè°¢é¡µé¢æ˜¾ç¤ºï¼ˆpurchase.thank-youï¼‰
#   - é»˜è®¤ä¸ä¾èµ– Protected Customer Data (PCD) æƒé™
#   - ä»…ä½¿ç”¨è®¢å•åŸºæœ¬ä¿¡æ¯ï¼ˆorderId, orderNumber, checkoutToken, lineItemsï¼‰
#   - ä¸è®¿é—® buyer/address/company ç­‰éœ€è¦ PCD çš„å­—æ®µ
#   - network_access = true: å…è®¸è°ƒç”¨åç«¯ APIï¼ˆå¦‚ /api/survey æäº¤é—®å·ï¼‰
#     - å¦‚æœ network access æœªè·æ‰¹ï¼Œç»„ä»¶ä¼šé™çº§æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
#
# P0-4: PCD åˆè§„è¯´æ˜
# - v1.0 ç‰ˆæœ¬é»˜è®¤ä¸æ”¶é›†ä»»ä½• PIIï¼ˆé‚®ç®±/åœ°å€/ç”µè¯ï¼‰
# - å¦‚æœæœªæ¥éœ€è¦ä½¿ç”¨ buyer ä¿¡æ¯ï¼Œéœ€è¦ï¼š
#   1. åœ¨ Shopify Partner Dashboard ç”³è¯· PCD æƒé™
#   2. ä½¿ç”¨ safeBuyer() è¾…åŠ©å‡½æ•°å®‰å…¨è®¿é—®
#   3. æä¾›é™çº§æ–¹æ¡ˆï¼ˆå½“ PCD ä¸å¯ç”¨æ—¶ï¼‰
[[extensions]]
type = "ui_extension"
name = "Post-purchase Survey"
handle = "post-purchase-survey"
uid = "5bbce4d5-0610-0b76-fa6d-c6fef535cee9f855bf02"

  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/Survey.tsx"
  target = "purchase.thank-you.block.render"

# =============================================================================
# Survey Block - Order Status Page (Customer Account)
# =============================================================================
# âš ï¸ é‡è¦ï¼šuid å¿…é¡»ç”± Shopify CLI åœ¨é¦–æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨ç”Ÿæˆ
#
# P0-4: UI Extensions Target è¯´æ˜
# - target = "customer-account.order-status.block.render": Customer Account Order Status é¡µé¢æ‰©å±•ç‚¹
#   - åœ¨å®¢æˆ·è´¦æˆ·çš„è®¢å•çŠ¶æ€é¡µé¢æ˜¾ç¤ºï¼ˆcustomer-account.order-statusï¼‰
#   - å±äº Customer Account UI Extensions
#   - é»˜è®¤ä¸ä¾èµ– Protected Customer Data (PCD) æƒé™
#   - ä»…ä½¿ç”¨è®¢å•åŸºæœ¬ä¿¡æ¯ï¼ˆorderId, orderNumber, lineItemsï¼‰
#   - network_access = true: å…è®¸è°ƒç”¨åç«¯ APIï¼ˆå¦‚ /api/survey æäº¤é—®å·ï¼‰
#     - å¦‚æœ network access æœªè·æ‰¹ï¼Œç»„ä»¶ä¼šé™çº§æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
#
# P0-4: PCD åˆè§„è¯´æ˜
# - v1.0 ç‰ˆæœ¬é»˜è®¤ä¸æ”¶é›†ä»»ä½• PIIï¼ˆé‚®ç®±/åœ°å€/ç”µè¯ï¼‰
# - å³ä½¿è¿è¡Œåœ¨å®¢æˆ·è´¦æˆ·ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿä¸è®¿é—®å®¢æˆ·ä¸ªäººä¿¡æ¯
# - å¦‚æœæœªæ¥éœ€è¦ä½¿ç”¨ buyer ä¿¡æ¯ï¼Œéœ€è¦ï¼š
#   1. åœ¨ Shopify Partner Dashboard ç”³è¯· PCD æƒé™
#   2. ä½¿ç”¨ safeBuyer() è¾…åŠ©å‡½æ•°å®‰å…¨è®¿é—®
#   3. æä¾›é™çº§æ–¹æ¡ˆï¼ˆå½“ PCD ä¸å¯ç”¨æ—¶ï¼‰
#
# å‚è€ƒï¼šhttps://shopify.dev/docs/api/customer-account-ui-extensions
# å‚è€ƒï¼šhttps://shopify.dev/docs/apps/store/data-protection/protected-customer-data
[[extensions]]
type = "ui_extension"
name = "Order Status Survey"
handle = "order-status-survey"
uid = "47dc5576-827b-917a-6223-7c68db326d526075dfb3"

  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/Survey.orderStatus.tsx"
  target = "customer-account.order-status.block.render"

# =============================================================================
# Shipping Tracker Block - Thank You Page
# =============================================================================
# v1 å·²æ”¯æŒï¼šæ­¤æ¨¡å—åœ¨ v1 ä¸­å¯ç”¨ï¼ˆGrowth å¥—é¤ï¼‰
# P0-2: ShippingTracker éœ€è¦è°ƒç”¨åç«¯ API è·å–ç‰©æµä¿¡æ¯ï¼Œéœ€è¦ç½‘ç»œè®¿é—®
[[extensions]]
type = "ui_extension"
name = "Shipping Progress Tracker"
handle = "shipping-tracker"
uid = "bef2635d-b17d-f9e5-c450-4597976fddffea5be910"

  # P0-2: éœ€è¦ç½‘ç»œè®¿é—®ï¼ˆè°ƒç”¨ /api/tracking è·å–ç‰©æµä¿¡æ¯ï¼‰
  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/ShippingTracker.tsx"
  target = "purchase.thank-you.block.render"

# =============================================================================
# Shipping Tracker Block - Order Status Page (Customer Account)
# =============================================================================
# v1 å·²æ”¯æŒï¼šæ­¤æ¨¡å—åœ¨ v1 ä¸­å¯ç”¨ï¼ˆGrowth å¥—é¤ï¼‰
# P0-2: ShippingTracker éœ€è¦è°ƒç”¨åç«¯ API è·å–ç‰©æµä¿¡æ¯ï¼Œéœ€è¦ç½‘ç»œè®¿é—®
[[extensions]]
type = "ui_extension"
name = "Order Status Shipping Tracker"
handle = "order-status-shipping-tracker"
uid = "42c378fa-d787-9bb3-9f2d-ee152e6cf2f01a2bf2ea"

  # P0-2: éœ€è¦ç½‘ç»œè®¿é—®ï¼ˆè°ƒç”¨ /api/tracking è·å–ç‰©æµä¿¡æ¯ï¼‰
  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/ShippingTracker.orderStatus.tsx"
  target = "customer-account.order-status.block.render"

# =============================================================================
# P1: v1.0 ç‰ˆæœ¬å·²ç§»é™¤ Upsell æ‰©å±•ç‚¹
# Upsell åŠŸèƒ½å°†åœ¨ v1.1+ ç‰ˆæœ¬ä¸­æ”¯æŒ
# =============================================================================

# =============================================================================
# Support / FAQ Block - Thank You Page
# =============================================================================
[[extensions]]
type = "ui_extension"
name = "Support & FAQ"
handle = "support-faq"
uid = "bf27e557-efdf-d8dc-ad0f-650e438de7faadccb23b"

  [extensions.capabilities]
  network_access = false

  [[extensions.targeting]]
  module = "./src/Support.tsx"
  target = "purchase.thank-you.block.render"

# =============================================================================
# Support / FAQ Block - Order Status Page (Customer Account)
# =============================================================================
[[extensions]]
type = "ui_extension"
name = "Order Status Support & FAQ"
handle = "order-status-support-faq"
uid = "0aa738e0-79d9-076a-435f-5ad1ea813a9058225869"

  [extensions.capabilities]
  network_access = false

  [[extensions.targeting]]
  module = "./src/Support.orderStatus.tsx"
  target = "customer-account.order-status.block.render"

# =============================================================================
# Reorder Block - Thank You Page
# =============================================================================
# v1 å·²æ”¯æŒï¼šæ­¤æ¨¡å—åœ¨ v1 ä¸­å¯ç”¨ï¼ˆGrowth å¥—é¤ï¼‰
# 
# P0-2: Thank you çš„ Reorder éœ€è¦è°ƒç”¨åç«¯ API è·å–è®¢å•ä¿¡æ¯ï¼Œéœ€è¦ç½‘ç»œè®¿é—®
# âš ï¸ é‡è¦ï¼šuid å¿…é¡»ç”± Shopify CLI åœ¨é¦–æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨ç”Ÿæˆ
# å½“å‰ UID ä¸ºä¸´æ—¶ç”Ÿæˆï¼Œéƒ¨ç½²æ—¶ Shopify CLI ä¼šè‡ªåŠ¨æ›¿æ¢
# =============================================================================
[[extensions]]
type = "ui_extension"
name = "Reorder Button"
handle = "reorder-button"
uid = "982865da-1686-33a5-6e19-9911913ba427ae89829a"  # ä¸´æ—¶ UIDï¼Œéƒ¨ç½²æ—¶ä¼šè¢« Shopify CLI è‡ªåŠ¨æ›¿æ¢

  # P0-2: éœ€è¦ç½‘ç»œè®¿é—®ï¼ˆè°ƒç”¨ /api/reorder è·å–è®¢å• line itemsï¼‰
  [extensions.capabilities]
  network_access = true

  [[extensions.targeting]]
  module = "./src/Reorder.tsx"
  target = "purchase.thank-you.block.render"

# =============================================================================
# Reorder Block - Order Status Page (Customer Account)
# =============================================================================
# v1 å·²æ”¯æŒï¼šæ­¤æ¨¡å—åœ¨ v1 ä¸­å¯ç”¨ï¼ˆGrowth å¥—é¤ï¼‰
# 
# P0-2: Order Status çš„ Reorder ä½¿ç”¨æœ¬åœ°æ„å»º cart permalinkï¼Œä¸éœ€è¦ç½‘ç»œè¯·æ±‚
# âš ï¸ é‡è¦ï¼šuid å¿…é¡»ç”± Shopify CLI åœ¨é¦–æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨ç”Ÿæˆ
# å½“å‰ UID ä¸ºä¸´æ—¶ç”Ÿæˆï¼Œéƒ¨ç½²æ—¶ Shopify CLI ä¼šè‡ªåŠ¨æ›¿æ¢
# =============================================================================
[[extensions]]
type = "ui_extension"
name = "Order Status Reorder Button"
handle = "order-status-reorder-button"
uid = "9436a208-0840-5eaa-957b-305b3da901ee5fb027de"  # ä¸´æ—¶ UIDï¼Œéƒ¨ç½²æ—¶ä¼šè¢« Shopify CLI è‡ªåŠ¨æ›¿æ¢

  # P0-2: ä¸éœ€è¦ç½‘ç»œè®¿é—®ï¼ˆæœ¬åœ°æ„å»º cart permalinkï¼‰
  [extensions.capabilities]
  network_access = false

  [[extensions.targeting]]
  module = "./src/Reorder.orderStatus.tsx"
  target = "customer-account.order-status.block.render"

# =============================================================================
# Settings Schema
# =============================================================================
[settings]
  # Survey Settings
  [[settings.fields]]
  key = "survey_title"
  name = "Survey Title"
  description = "Title for the post-purchase survey"
  type = "single_line_text_field"
  
  [[settings.fields]]
  key = "survey_question"
  name = "Survey Question"
  description = "The question to ask customers"
  type = "single_line_text_field"

  # Shipping Tracker Settings (P0-3: æ”¹ä¸ºè®¢å•çŠ¶æ€å…¥å£ï¼Œä¸å†’å……çœŸå®ç‰©æµå·)
  [[settings.fields]]
  key = "shipping_title"
  name = "Shipping Tracker Title"
  description = "Title for the shipping progress section (e.g., 'è®¢å•çŠ¶æ€')"
  type = "single_line_text_field"
  
  [[settings.fields]]
  key = "shipping_tip_text"
  name = "Shipping Tip Text"
  description = "Helpful tip shown below the progress tracker"
  type = "single_line_text_field"

  # P1: v1.0 ç‰ˆæœ¬å·²ç§»é™¤ Upsell æ‰©å±•ç‚¹ï¼Œç›¸å…³è®¾ç½®å·²ç§»é™¤
  # Upsell åŠŸèƒ½å°†åœ¨ v1.1+ ç‰ˆæœ¬ä¸­æ”¯æŒ

  # Support / FAQ Settings
  [[settings.fields]]
  key = "support_title"
  name = "Support block title"
  description = "Heading for the support/FAQ block"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_description"
  name = "Support block description"
  description = "Short description shown under the title"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_contact_url"
  name = "Support contact URL"
  description = "Link to your helpdesk/contact page (mailto: also supported)"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_contact_email"
  name = "Support email fallback"
  description = "Used to build mailto: link if contact URL is empty"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_whatsapp_number"
  name = "WhatsApp Number"
  description = "WhatsApp contact number with country code (e.g., +8613800138000)"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_messenger_url"
  name = "Facebook Messenger URL"
  description = "Facebook Messenger contact link (e.g., https://m.me/your-page)"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "support_faq_url"
  name = "FAQ URL"
  description = "Link to your FAQ/knowledge base"
  type = "single_line_text_field"

  # Reorder Settings
  [[settings.fields]]
  key = "reorder_title"
  name = "Reorder Block Title"
  description = "Title for the reorder block (e.g., 'ğŸ“¦ å†æ¬¡è´­ä¹°')"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "reorder_subtitle"
  name = "Reorder Block Subtitle"
  description = "Subtitle shown below the title"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "reorder_button_text"
  name = "Reorder Button Text"
  description = "Text on the reorder button (e.g., 'å†æ¬¡è´­ä¹° â†’')"
  type = "single_line_text_field"

  [[settings.fields]]
  key = "reorder_show_items"
  name = "Show Items List"
  description = "Show the list of items from the order (true/false)"
  type = "single_line_text_field"


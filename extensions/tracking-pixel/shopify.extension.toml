# Learn more: https://shopify.dev/docs/apps/build/online-store/web-pixels

api_version = "2024-10"
type = "web_pixel_extension"
name = "Tracking Guardian Pixel"
runtime_context = "strict"

# Privacy & Consent Configuration
# This pixel respects customer consent and only sends data when allowed
[customer_privacy]
  # Analytics data is used for conversion tracking and attribution
  analytics = true
  # Marketing data is used for ad platform optimization
  marketing = true
  # We collect minimal data needed for conversion tracking
  preferences = false
  # No sale of data - data is only used for merchant's own tracking
  sale_of_data = "disabled"

[settings]
  [[settings.fields]]
    key = "backend_url"
    name = "Backend URL"
    description = "Your Tracking Guardian app URL (e.g., https://your-app.onrender.com). Required for server-side tracking."
    type = "single_line_text_field"

  # P0-4: Renamed from ingestion_secret to ingestion_key with updated description
  [[settings.fields]]
    key = "ingestion_secret"
    name = "Ingestion Key"
    description = "Key for request association and filtering (auto-generated). Used for diagnostics and noise reduction."
    type = "single_line_text_field"

  [[settings.fields]]
    key = "debug"
    name = "Debug Mode"
    description = "Enable debug logging in browser console (disable for production)"
    type = "boolean"
